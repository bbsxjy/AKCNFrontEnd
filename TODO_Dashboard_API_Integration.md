# 仪表盘API集成待办事项和配置清单

## 后端需要实现的API端点

### 高优先级（核心功能）

- [ ] **GET /api/v1/dashboard/stats**
  - 返回仪表盘统计数据
  - 包含应用总数、各状态数量、平均进度

- [ ] **GET /api/v1/dashboard/progress-trend**
  - 返回历史进度趋势数据
  - 支持时间段参数（1月/3月/6月）
  - 需要存储历史快照数据

- [ ] **GET /api/v1/dashboard/department-distribution**
  - 返回部门应用分布
  - 包含各部门应用数量和平均进度

### 中优先级（用户体验）

- [ ] **GET /api/v1/subtasks/my-tasks**
  - 返回当前用户的待办任务
  - 根据JWT token自动过滤
  - 按紧急程度排序

- [ ] **WebSocket实时通知**
  - 实现WebSocket服务器
  - 支持实时推送通知
  - 支持进度更新推送

## 前端待优化事项

### 性能优化
- [ ] 实现前端数据缓存机制（5分钟TTL）
- [ ] 添加加载骨架屏提升用户体验
- [ ] 优化图表渲染性能（大数据量时）
- [ ] 实现虚拟滚动（任务列表超过100项时）

### 功能增强
- [ ] 添加数据导出功能（Excel/PDF）
- [ ] 实现图表交互（点击查看详情）
- [ ] 添加时间范围选择器
- [ ] 实现自定义仪表盘布局

## 配置检查清单

### 环境变量配置
- [x] API基础URL: `http://localhost:8000/api/v1`
- [x] 固定测试Token: `Bearer token_1_admin_full_access_test_2024`
- [ ] 生产环境API URL（待配置）
- [ ] 生产环境认证方式（待配置）

### 测试模式切换
当后端准备就绪时，需要：

1. **恢复动态Token获取**
   - 文件: `src/api/index.ts`
   - 移除固定token，启用动态获取

2. **启用真实用户认证**
   - 文件: `src/stores/auth.ts`
   - 移除测试用户，实现真实登录

3. **启用WebSocket连接**
   - 文件: `src/views/DashboardView.vue`
   - 取消注释WebSocket初始化代码

4. **添加路由守卫**
   - 文件: `src/router/index.ts`
   - 实现认证检查

## 测试验证清单

### 功能测试
- [ ] 统计数据正确显示
- [ ] 图表数据正确渲染
- [ ] 待办任务正确过滤
- [ ] 自动刷新功能正常
- [ ] 错误处理机制有效

### 性能测试
- [ ] 首屏加载时间 < 3秒
- [ ] API响应时间 < 1秒
- [ ] 内存使用稳定
- [ ] 无内存泄漏

### 兼容性测试
- [ ] Chrome最新版
- [ ] Firefox最新版
- [ ] Safari最新版
- [ ] Edge最新版
- [ ] 移动端响应式

## 部署前检查

- [ ] 移除所有console.log
- [ ] 更新API端点为生产环境
- [ ] 配置正确的CORS设置
- [ ] 启用HTTPS
- [ ] 配置CDN加速
- [ ] 设置错误监控（Sentry等）

## 监控指标

建议添加以下监控：
- API调用成功率
- 页面加载时间
- 用户操作响应时间
- 错误发生率
- 自动刷新失败率

## 联系人

- 前端开发: [您的团队]
- 后端开发: [后端团队]
- 产品经理: [产品团队]
- 测试团队: [QA团队]

---

**文档更新日期**: 2024-01-15
**下次评审日期**: 2024-01-22